# 音声認識・顔認識・データ送信システム

このプロジェクトは、**音声認識**を使用して「出勤」または「退勤」というワードを検出し、**顔認識**を実行して該当者を特定し、その情報を**サーバーに送信**するシステムです。

---

## 🔧 機能概要

### 🎤 音声認識

* マイクからリアルタイムで音声を取得し、「出勤」または「退勤」というワードを検出します。

### 🧑‍💼 顔認識

* 音声認識で該当ワードが検出された場合、USBカメラで写真を撮影し、既知の顔データと照合して該当者を特定します。

### 🌐 データ送信

* 認識された名前とステータス（出勤/退勤）をサーバーに **POSTリクエスト** で送信します。

---

## 📋 必要条件

* Python 3.7以上

### 必要なPythonライブラリ:

* `face_recognition`
* `speechrecognition`
* `sounddevice`
* `requests`
* `opencv-python`

---

## ⚙️ セットアップ手順

### 1. 必要なライブラリをインストール

```bash
pip install -r requirements.txt
```

### 2. 既知の顔データを準備

`known_faces` ディレクトリを作成し、以下のような構造で顔画像を保存してください。

```
known_faces/
├── 山田太郎/
│   ├── image1.jpg
│   ├── image2.jpg
├── 鈴木花子/
    ├── image1.jpg
    ├── image2.jpg
```

---

## ▶️ 使用方法

### システムの起動

以下のコマンドで `main.py` を実行します。

```bash
python3 main.py
```

### 動作の流れ

1. マイクから音声をリアルタイムで認識します。
2. 「出勤」または「退勤」というワードが検出されると、USBカメラで写真を撮影します。
3. 撮影した写真を既知の顔データと照合し、該当者を特定します。
4. 認識された名前とステータス（出勤/退勤）をサーバーに送信します。

---

### ❎ 終了方法

実行中に `Ctrl+C` を押すことでシステムを終了できます。

---

## 💡 サンプル実行

```bash
$ python3 main.py
マイクからの音声を認識中...（Ctrl+Cで終了）

認識結果: 出勤  
音声認識で「出勤」が検出されました。顔認識を開始します...  
写真を撮影します...  
captured.jpg に保存されました。  
山田太郎さん、おはよーござんす!('◇')ゞ  
送信成功: {"status": "success", "message": "データが正常に送信されました。"}
```

---

## ❗ エラー例

### 顔認識に失敗した場合:

```
顔認識に失敗しました。
```

### サーバーへの送信に失敗した場合:

```
送信失敗: <エラーメッセージ>
```

---

## 🔍 注意事項

* **カメラとマイクの動作確認**
  　USBカメラとマイクが正しく接続されていることを確認してください。

* **顔データの登録**
  　`known_faces` ディレクトリに正しい形式で顔データを登録してください。

* **サーバーの動作確認**
  　サーバーが正しく動作していることを確認してください。

* **音声認識の精度**
  　音声認識は環境ノイズの影響を受ける可能性があります。静かな環境で使用してください。

---

## 📁 ディレクトリ構成

```
/project-root
├── main.py               # メインスクリプト
├── known_faces/          # 既知の顔データ
│   ├── 山田太郎/
│   │   ├── image1.jpg
│   │   ├── image2.jpg
│   ├── 鈴木花子/
│       ├── image1.jpg
│       ├── image2.jpg
├── requirements.txt      # 必要なライブラリ
└── README.md             # このファイル
```